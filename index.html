<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOVEREIGN SENTINEL | ASSET WATCH v1.3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600&display=swap');

        :root {
            --bg-dark: #0a0a0a;
            --panel-bg: rgba(20, 20, 20, 0.6);
            --border-color: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--bg-dark);
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        /* VIBE BACKGROUND */
        .grid-bg {
            position: fixed; inset: 0; z-index: -1;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
        }

        /* GLASS PANELS */
        .sentinel-card {
            background: var(--panel-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* HEADER */
        h1 { font-family: 'JetBrains Mono', monospace; letter-spacing: -1px; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* LAYOUT */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 24px;
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 24px;
        }
        .col-span-12 { grid-column: span 12; }
        
        /* Responsive Tweaks */
        @media (max-width: 1024px) {
            .col-span-12 { grid-column: span 12; }
        }
    </style>
</head>
<body>

    <div class="grid-bg"></div>

    <nav class="flex justify-between items-center px-8 py-6 max-w-[1400px] mx-auto border-b border-white/10 mb-8">
        <div class="flex items-center gap-3">
            <div class="w-3 h-3 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_10px_#10b981]"></div>
            <h1 class="text-xl font-bold tracking-tighter uppercase">SOVEREIGN SENTINEL <span class="text-xs text-neutral-500 font-normal ml-2">v1.3</span></h1>
        </div>
        <div class="flex gap-8 items-center">
            <div class="text-right border-l border-white/10 pl-8">
                <div class="text-[0.6rem] text-rose-500 uppercase mono">Leakage (Fees)</div>
                <div class="text-xs text-rose-400 mono">¬£0.00</div>
            </div>
        </div>
    </nav>

    <div class="main-grid">
        
        <!-- ROW 1: HEADS-UP DISPLAY (METRICS) -->
        <div class="col-span-12 grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
            <div class="sentinel-card flex flex-col justify-between h-24 border-l-4 border-l-emerald-500/50">
                <span class="text-xs mono text-neutral-500 uppercase tracking-widest">Total Wealth</span>
                <span class="text-2xl font-bold text-white mono">¬£175,450.89</span>
            </div>
            <div class="sentinel-card flex flex-col justify-between h-24 border-l-4 border-l-blue-500/50">
                <span class="text-xs mono text-neutral-500 uppercase tracking-widest">Cash Reserve</span>
                <span class="text-2xl font-bold text-white mono">¬£15,096.13</span>
            </div>
            <div class="sentinel-card flex flex-col justify-between h-24 border-l-4 border-l-neutral-500/50">
                <span class="text-xs mono text-neutral-500 uppercase tracking-widest">System Status</span>
                <div>
                   <span class="text-xl font-bold text-emerald-500 mono">ONLINE</span>
                   <div class="text-[0.6rem] text-neutral-600 mt-1">Synced: 2026-01-23 20:07 UTC</div>
                </div>
            </div>
        </div>

        <!-- ROW 2: FULL WIDTH HEATMAP -->
        <div class="sentinel-card col-span-12">
            <div class="flex justify-between items-end mb-4">
                <div>
                    <h2 class="text-sm mono text-neutral-400 mb-1">TRUE VALUE HEATMAP</h2>
                    <p class="text-xs text-neutral-500">Size = Position Value | Color = Lifetime P&L</p>
                </div>
            </div>
            
            <div id="heatmap-chart" style="min-height: 600px;"></div>
        </div>
        
        <!-- ROW 3: SOVEREIGN ARCHITECT REPORT (MOAT AUDIT) -->
        <div class="sentinel-card col-span-12 mb-6">
             <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 class="text-sm mono text-neutral-400 mb-1">üè∞ MOAT AUDIT (THE ARCHITECT)</h2>
                    <p class="text-xs text-neutral-500">Cash Hurdle: 3.80% | Tax Reality: UK (0%) vs US (15% WHT)</p>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead class="text-neutral-500 text-xs mono uppercase tracking-widest border-b border-white/10">
                        <tr>
                            <th class="p-3">Ticker</th>
                            <th class="p-3">Origin</th>
                            <th class="p-3">Net Yield (Live)</th>
                            <th class="p-3">Growth (P&L)</th>
                            <th class="p-3">Verdict</th>
                            <th class="p-3 text-right">Action</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm mono">
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">LGEN</td>
                            <td class="p-3">
                                
                                    <span class="text-emerald-500 text-xs">UK (SOVEREIGN)</span>
                                
                            </td>
                            <td class="p-3">1.63%</td>
                            <td class="p-3 text-rose-400">-0.6%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">LILMF</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">2.12%</td>
                            <td class="p-3 text-rose-400">-99.9%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">VSNT</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">1.78%</td>
                            <td class="p-3 text-rose-400">-6.3%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">SOLV</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">1.14%</td>
                            <td class="p-3 text-rose-400">-1.8%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">EG</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">1.42%</td>
                            <td class="p-3 text-rose-400">-3.3%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">QCOM</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">2.28%</td>
                            <td class="p-3 text-rose-400">-10.0%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">NFLX</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">1.73%</td>
                            <td class="p-3 text-rose-400">-7.5%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">EOG</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">3.66%</td>
                            <td class="p-3 text-rose-400">-5.5%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">CNNE</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">1.93%</td>
                            <td class="p-3 text-rose-400">-1.6%</td>
                            <td class="p-3">
                                
                                    <span class="bg-rose-500/20 text-rose-400 px-2 py-1 rounded text-xs font-bold">FAIL</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Fails Cash Hurdle (3.8%)</span>
                                <span class="ml-2 font-bold text-rose-500">TRIM</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">BMY</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">2.91%</td>
                            <td class="p-3 text-emerald-400">+7.9%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Growth compensated</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">RIO</td>
                            <td class="p-3">
                                
                                    <span class="text-emerald-500 text-xs">UK (SOVEREIGN)</span>
                                
                            </td>
                            <td class="p-3">3.90%</td>
                            <td class="p-3 text-emerald-400">+43.7%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Yields > Cash</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">BATS</td>
                            <td class="p-3">
                                
                                    <span class="text-emerald-500 text-xs">UK (SOVEREIGN)</span>
                                
                            </td>
                            <td class="p-3">4.81%</td>
                            <td class="p-3 text-emerald-400">+3.0%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Yields > Cash</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">NUE</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">3.54%</td>
                            <td class="p-3 text-emerald-400">+32.6%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Growth compensated</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">CRM</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">4.24%</td>
                            <td class="p-3 text-rose-400">-8.4%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Yields > Cash</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="p-3 font-bold">CTVA</td>
                            <td class="p-3">
                                
                                    <span class="text-amber-500 text-xs">US (TAX TRAP)</span>
                                
                            </td>
                            <td class="p-3">3.89%</td>
                            <td class="p-3 text-emerald-400">+3.5%</td>
                            <td class="p-3">
                                
                                    <span class="bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold">PASS</span>
                                
                            </td>
                            <td class="p-3 text-right">
                                <span class="text-xs text-neutral-400">Yields > Cash</span>
                                <span class="ml-2 font-bold text-emerald-500">HOLD</span>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ROW 4: ALERTS -->
        <div class="sentinel-card col-span-12">
            <h2 class="text-sm mono text-neutral-400 uppercase tracking-widest mb-4">Sentinel Alerts</h2>
            <!-- Grid for alerts to save vertical space -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="alerts-container">
            </div>
        </div>

    </div>

    <script>
        // --- 1. DATA INJECTION ---
        const mapData = [{"x": "EG", "y": 21618.995850974, "fillColor": "#dc3545", "custom_main": "\u00a321,619.00", "custom_sub": "-\u00a3729.65 (-3.26%)"}, {"x": "CNNE", "y": 18864.414910637202, "fillColor": "#dc3545", "custom_main": "\u00a318,864.41", "custom_sub": "-\u00a3304.53 (-1.59%)"}, {"x": "EOG", "y": 18074.3725466403, "fillColor": "#dc3545", "custom_main": "\u00a318,074.37", "custom_sub": "-\u00a31,059.41 (-5.54%)"}, {"x": "NUE", "y": 17997.76145764, "fillColor": "#28a745", "custom_main": "\u00a317,997.76", "custom_sub": "+\u00a34,426.61 (+32.62%)"}, {"x": "CRM", "y": 17529.82, "fillColor": "#dc3545", "custom_main": "\u00a317,529.82", "custom_sub": "-\u00a31,597.98 (-8.35%)"}, {"x": "NFLX", "y": 16252.6, "fillColor": "#dc3545", "custom_main": "\u00a316,252.60", "custom_sub": "-\u00a31,316.60 (-7.49%)"}, {"x": "QCOM", "y": 13969.8, "fillColor": "#dc3545", "custom_main": "\u00a313,969.80", "custom_sub": "-\u00a31,559.40 (-10.04%)"}, {"x": "CTVA", "y": 12537.0, "fillColor": "#28a745", "custom_main": "\u00a312,537.00", "custom_sub": "+\u00a3419.73 (+3.46%)"}, {"x": "BMY", "y": 10364.5, "fillColor": "#28a745", "custom_main": "\u00a310,364.50", "custom_sub": "+\u00a3756.20 (+7.87%)"}, {"x": "SOLV", "y": 7902.0, "fillColor": "#dc3545", "custom_main": "\u00a37,902.00", "custom_sub": "-\u00a3142.73 (-1.77%)"}, {"x": "RIO", "y": 6731.8286265648, "fillColor": "#28a745", "custom_main": "\u00a36,731.83", "custom_sub": "+\u00a32,046.70 (+43.69%)"}, {"x": "BATS", "y": 4328.0, "fillColor": "#28a745", "custom_main": "\u00a34,328.00", "custom_sub": "+\u00a3125.28 (+2.98%)"}, {"x": "VSNT", "y": 3457.6499999999996, "fillColor": "#dc3545", "custom_main": "\u00a33,457.65", "custom_sub": "-\u00a3234.17 (-6.34%)"}, {"x": "LGEN", "y": 2582.0, "fillColor": "#dc3545", "custom_main": "\u00a32,582.00", "custom_sub": "-\u00a316.00 (-0.62%)"}, {"x": "LILMF", "y": 0.3386966253, "fillColor": "#dc3545", "custom_main": "\u00a30.34", "custom_sub": "-\u00a3281.34 (-99.88%)"}];

        // --- 2. APEXCHARTS RENDER ENGINE (v1.3 Layout) ---
        var options = {
            series: [
                {
                    data: mapData
                }
            ],
            legend: { show: false },
            chart: {
                height: 600, // Expanded Height
                type: 'treemap',
                toolbar: { show: false },
                fontFamily: 'JetBrains Mono'
            },
            colors: [
                '#28a745', '#dc3545'
            ],
            plotOptions: {
                treemap: {
                    distributed: true,
                    enableShades: false,
                    dataLabels: {
                        format: 'scale' 
                    }
                }
            },
            dataLabels: {
                enabled: true,
                style: { fontSize: '16px', fontWeight: 'bold' }, // Bigger Text
                formatter: function(text, op) {
                    let point = op.w.config.series[0].data[op.dataPointIndex];
                    return [text, point.custom_main, point.custom_sub];
                },
                dropShadow: { enabled: true }
            },
            tooltip: {
                theme: 'dark',
                y: {
                    formatter: function(value, op) {
                        let point = op.w.config.series[0].data[op.dataPointIndex];
                        return point.custom_sub;
                    }
                }
            },
            stroke: { show: true, width: 2, colors: ['#141414'] }
        };

        var chart = new ApexCharts(document.querySelector("#heatmap-chart"), options);
        chart.render();

        // --- 3. ALERTS RENDERER ---
        function renderAlerts() {
             const container = document.getElementById('alerts-container');
             container.innerHTML = '';
             
             // Top 6 by Size
             const topAssets = mapData.slice(0, 6);
             
             topAssets.forEach(m => {
                 const isGain = m.fillColor === '#28a745';
                 const div = document.createElement('div');
                 div.className = 'flex items-center justify-between p-4 rounded bg-white/5 border border-white/5 hover:bg-white/10 transition-colors';
                 div.innerHTML = `
                     <div class="flex items-center gap-3">
                         <div class="w-2 h-2 rounded-full ${isGain ? 'bg-emerald-500' : 'bg-rose-500'}"></div>
                         <div>
                             <span class="text-sm font-bold mono uppercase block">${m.x}</span>
                             <span class="text-[0.65rem] text-neutral-500">HOLDING: ${m.custom_main}</span>
                         </div>
                     </div>
                     <span class="mono text-sm font-bold ${isGain ? 'text-emerald-400' : 'text-rose-400'}">
                         ${m.custom_sub.split(' ')[0]} 
                     </span>
                 `;
                 container.appendChild(div);
             });
        }
        
        renderAlerts();

    </script>
</body>
</html>